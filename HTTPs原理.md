参考：
http://www.cnblogs.com/JeffreySun/archive/2010/06/24/1627247.html
http://support.upyun.com/hc/kb/article/1031843/

## 为什么需要HTTPs
由于HTTP是明文传输，容易被黑客通过『中间人攻击』窃听、篡改、冒充。
如何对HTTP内容加密？TCP的载荷(即HTTP内容)用SSL加密。
对称加密还是非对称加密？

## 公钥密码体制
公钥密码体制分为三个部分，**公钥**、**私钥**、**加密解密算法**。</br>
（RSA就是一种现在广泛使用的公钥密码体制，其算法是公开的）
### 密钥
一般就是一个字符串，在加密或者解密时传递给加密/解密算法。公钥、私钥就是密钥。
### 加密
通过**加密算法**和**公钥**对内容(或者叫**明文**)进行加密，得到**密文**。加密过程需要用到**公钥**。
### 解密
通过**解密算法**和**私钥**对密文进行解密，得到**明文**。解密过程需要用到**解密算法**和**私钥**。</br>
注：公钥和私钥是一对。由某个公钥加密的内容**只能**由其对应的私钥解密。
在公钥密码体制中，**公钥**和**算法**都是公开的！，只有私钥是保留的。</br>
能够让这些`由公开的加密算法和公开的公钥加密的内容`在互联网中各个路由器之间穿梭而不怕被这中间的任意一个环节被窃听篡改，</br>
是基于这样一个事实：由公钥猜解出其对应的私钥来解密，几乎不可能完成(基于数论)。
在实际使用中，一般是生成一对公钥和私钥，把私钥发布出去给别人使用(只能加密)，自己保留私钥用于解密。

## 签名
签名是在信息后加的一段内容。这种机制可以用于检测信息有没有被修改过。/<br>
### 如何达到这种效果呢？
对信息进行hash计算得到一个hash值。注意，这个过程是不可逆的，也就是说无法通过hash值得出原来的信息内容。</br>
在把信息发送出去时，把这个hash值**加密**后作为**签名**和信息一起发出去。</br>
接收方在接收到这个`信息+签名`的结合体之后，会重新计算信息的hash值，并和信息携带的hash值(将签名解密后)进行对比。若一致，则说明信息在发送之后没有被修改过。</br>
一般来说，不同的内容进行hash计算后得到的hash值是不一样的，于是只要内容被修改，再对其进行hash计算后得到的hash值就会与之前不一样。</br>
为了防止恶意者在截取到这个`信息+签名`的结合体之后，修改信息的同时也修改hash值从而修改之后让他们再次匹配。</br>
为了防止这种情况，hash值一般都会进行加密后(即得到签名)再和信息一起发送，以保证这个hash值不被修改。</br>
（至于如何让接收者可以解密这个签名，这个过程涉及到**数字证书**的概念）
## 数字证书
由于握手期间，黑客可以拦截用户向服务器发送的握手请求，于是可以冒充服务器将公钥发给用户，自己保留私钥。</br>
而在之后用户认证服务器时，黑客用自己的私钥将握手信息(你好，我是某某服务器)加密后，用户确实可以用黑客之前发的公钥解密的。</br>
这样用户就相信了黑客是真的某某服务器，随后泄露了后续用于加密和解密的对称密钥，从而导致了安全问题。
而**这里问题的根源在于，大家都可以生成公钥、私钥对，无法确认公钥到底是谁的** </br>
数字证书的提出即是为了解决这个问题。</br>
一个证书包含下面的具体内容。
- 证书的发布机构
- 证书的有效期
- 公钥
- 证书所有者
- 签名所使用的算法
- 指纹以及指纹算法

**数字证书可以保证数字证书里的公钥确实是这个证书的所有者(Subject)的，或者证书可以用来确认对方的身**。</br>
也就是说，我们拿到一个数字证书，就可以判断这个数字证书到底是谁的。
## 数字证书的构成和原理
![](http://images.cnblogs.com/cnblogs_com/JefferySun/WindowsLiveWriter/aba748e7a228_8B56/certificateDetails_thumb.png)
### Issuer (证书的发布机构)
指出是什么机构发布的这个证书，也就是指明这个证书是哪个公司创建的(只是创建证书，不是指证书的使用者)。对于上面的这个证书(图中)来说，就是指"SecureTrust CA"这个机构。
### Valid from , Valid to (证书的有效期)
也就是证书的有效时间，或者说证书的使用期限。 过了有效期限，证书就会作废，不能使用了。
### Public key (公钥)
这个我们在前面介绍公钥密码体制时介绍过，公钥是用来对消息进行加密的，第2章的例子中经常用到的。这个数字证书的公钥是2048位的，它的值可以在图的中间的那个对话框中看得到，是很长的一串数字。
### Subject (所有者)
这个证书是发布给谁的，或者说证书的所有者，一般是某个人或者某个公司名称、机构的名称、公司网站的网址等。 对于这里的证书来说，证书的所有者是Trustwave这个公司。
### Signature algorithm (签名所使用的算法)
就是指的这个数字证书的数字签名所使用的加密算法，这样就可以使用证书发布机构的证书里面的公钥，根据这个算法对指纹进行解密。指纹的加密结果就是数字签名
### Thumbprint, Thumbprint algorithm (指纹以及指纹算法)
这个是用来保证证书的完整性的，也就是说确保证书没有被修改过，这东西的作用和2.7中说到的第3个问题类似。 其原理就是在发布证书时，发布者根据指纹算法(一个hash算法)计算整个证书的hash值(指纹)并和证书放在一起，使用者在打开证书时，自己也根据指纹算法计算一下证书的hash值(指纹)，如果和刚开始的值对得上，就说明证书没有被修改过，因为证书的内容被修改后，根据证书的内容计算的出的hash值(指纹)是会变化的。 注意，这个指纹会使用"SecureTrust CA"这个证书机构的私钥用签名算法(Signature algorithm)加密后和证书放在一起。
-> 注意，为了保证安全，在证书的发布机构发布证书时，证书的指纹和指纹算法，都会加密后再和证书放到一起发布，以防有人修改指纹后伪造相应的数字证书。这里问题又来了，证书的指纹和指纹算法用什么加密呢？他们是用证书发布机构的私钥进行加密的。可以用证书发布机构的公钥对指纹和指纹算法解密，也就是说证书发布机构除了给别人发布证书外，他自己本身也有自己的证书。证书发布机构的证书是哪里来的呢？？？这个证书发布机构的数字证书(一般由他自己生成)在我们的操作系统刚安装好时(例如windows xp等操作系统)，这些证书发布机构的数字证书就已经被微软(或者其它操作系统的开发机构)安装在操作系统中了，微软等公司会根据一些权威安全机构的评估选取一些信誉很好并且通过一定的安全认证的证书发布机构，把这些证书发布机构的证书默认就安装在操作系统里面了，并且设置为操作系统信任的数字证书。这些证书发布机构自己持有与他自己的数字证书对应的私钥，他会用这个私钥加密所有他发布的证书的指纹作为数字签名。

## 对称加密
若完全用对称加密，需要CS双方共享同一个密钥，而不同的C、S太多，双方都需要维护大量的密钥，维护成本太高。
## 非对称加密
若完全用非对称加密，
1. 太耗费计算资源。
2. 由于公钥是公开的，黑客也可拥有，于是通过私钥加密的信息被黑客截取后可通过公钥进行解密
//TODO
## combo(对称加密, 非对称加密)
